@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* ================================================
   WIGVU Design System v2.1
   - Light mode default, Clean & Minimal
   - Sidebar navigation (Liner-inspired)
   - Pretendard typography
   ================================================ */

@theme inline {
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;
  --space-16: 64px;

  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;

  --leading-tight: 1.2;
  --leading-normal: 1.5;
  --leading-relaxed: 1.6;
  --leading-reading: 1.8;

  --font-sans: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  --font-mono: var(--font-geist-mono);

  --radius: 8px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;

  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --sidebar-width: 240px;
  --sidebar-collapsed-width: 48px;
  --content-max-width: 960px;
  --reading-max-width: 720px;
  --input-max-width: 640px;
}

/* Light Mode (Default) */
:root {
  --background: #FFFFFF;
  --background-secondary: #F8F9FA;
  --foreground: #111111;
  --foreground-secondary: #6B7280;

  --card: #FFFFFF;
  --card-foreground: #111111;
  --muted: #F8F9FA;
  --muted-foreground: #6B7280;

  --accent: #2563EB;
  --accent-light: #EFF6FF;
  --accent-foreground: #FFFFFF;

  --primary: #2563EB;
  --primary-foreground: #FFFFFF;

  --border: #E5E7EB;
  --border-hover: #D1D5DB;
  --input: #E5E7EB;
  --ring: #2563EB;

  --surface: #FFFFFF;
  --sidebar-bg: #FFFFFF;
  --sidebar-section: #9CA3AF;

  --success: #16A34A;
  --warning: #F59E0B;
  --destructive: #DC2626;
  --info: #2563EB;

  --level-beginner: #16A34A;
  --level-beginner-bg: #F0FDF4;
  --level-intermediate: #F59E0B;
  --level-intermediate-bg: #FFFBEB;
  --level-advanced: #DC2626;
  --level-advanced-bg: #FEF2F2;
}

/* Dark Mode */
.dark {
  --background: #0A0A0A;
  --background-secondary: #141414;
  --foreground: #FAFAFA;
  --foreground-secondary: #A1A1AA;

  --card: #141414;
  --card-foreground: #FAFAFA;
  --muted: #1E1E1E;
  --muted-foreground: #A1A1AA;

  --accent: #3B82F6;
  --accent-light: #1E293B;
  --accent-foreground: #FFFFFF;

  --primary: #3B82F6;
  --primary-foreground: #FFFFFF;

  --border: #27272A;
  --border-hover: #3F3F46;
  --input: #27272A;
  --ring: #3B82F6;

  --surface: #141414;
  --sidebar-bg: #0A0A0A;
  --sidebar-section: #71717A;

  --success: #22C55E;
  --warning: #FBBF24;
  --destructive: #EF4444;
  --info: #3B82F6;

  --level-beginner: #22C55E;
  --level-beginner-bg: #052e16;
  --level-intermediate: #FBBF24;
  --level-intermediate-bg: #422006;
  --level-advanced: #EF4444;
  --level-advanced-bg: #450a0a;
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Typography Scale */
  h1 {
    font-size: var(--text-2xl);
    font-weight: 700;
    line-height: var(--leading-tight);
    letter-spacing: -0.01em;
  }

  h2 {
    font-size: 1.375rem;
    font-weight: 600;
    line-height: var(--leading-tight);
  }

  h3 {
    font-size: var(--text-lg);
    font-weight: 600;
    line-height: var(--leading-normal);
  }
}

@layer components {
  /* Sidebar Layout */
  .app-layout {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  .app-sidebar {
    background: var(--sidebar-bg);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    transition: width 200ms ease;
    overflow: hidden;
    flex-shrink: 0;
  }

  .app-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
  }

  /* Sidebar Item */
  .sidebar-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    border-radius: var(--radius-md);
    color: var(--foreground-secondary);
    font-size: var(--text-sm);
    cursor: pointer;
    transition: all 150ms ease;
    border-left: 2px solid transparent;
    margin: 0 8px;
  }

  .sidebar-item:hover {
    background: var(--background-secondary);
  }

  .sidebar-item.active {
    color: var(--foreground);
    background: var(--background-secondary);
    border-left-color: var(--accent);
    font-weight: 500;
  }

  .sidebar-section-label {
    font-size: var(--text-xs);
    font-weight: 500;
    color: var(--sidebar-section);
    padding: 16px 20px 4px;
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  /* Button Styles */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background: var(--accent);
    color: var(--accent-foreground);
    font-size: var(--text-sm);
    font-weight: 500;
    border-radius: var(--radius-md);
    border: none;
    cursor: pointer;
    transition: all 150ms ease;
  }

  .btn-primary:hover {
    opacity: 0.9;
  }

  .btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .btn-ghost {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: transparent;
    color: var(--foreground-secondary);
    font-size: var(--text-sm);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 150ms ease;
  }

  .btn-ghost:hover {
    border-color: var(--foreground-secondary);
    color: var(--foreground);
  }

  /* Input */
  .input-field {
    width: 100%;
    padding: var(--space-4) var(--space-5);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    color: var(--foreground);
    font-size: var(--text-base);
    transition: all 150ms ease;
    resize: none;
  }

  .input-field:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input-field::placeholder {
    color: var(--foreground-secondary);
  }

  /* Badge */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    font-size: var(--text-xs);
    font-weight: 500;
    border-radius: 9999px;
  }

  /* Cards */
  .bento-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    transition: all 150ms ease;
  }

  .bento-card:hover {
    border-color: var(--border-hover);
  }

  /* Accent highlight */
  .accent-highlight {
    background: var(--accent-light);
    border-left: 2px solid var(--accent);
  }

  /* View mode toggle (pill) */
  .view-mode-toggle {
    display: inline-flex;
    background: var(--background-secondary);
    border-radius: 9999px;
    padding: 2px;
    gap: 2px;
  }

  .view-mode-toggle button {
    padding: 6px 16px;
    font-size: var(--text-sm);
    border-radius: 9999px;
    color: var(--foreground-secondary);
    transition: all 150ms ease;
    border: none;
    background: transparent;
    cursor: pointer;
  }

  .view-mode-toggle button.active {
    background: var(--surface);
    color: var(--foreground);
    font-weight: 500;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  }

  /* Key Moment Card (video analysis) */
  .key-moment-card {
    flex-shrink: 0;
    width: 140px;
    padding: var(--space-3);
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 150ms ease;
  }

  .key-moment-card:hover {
    border-color: var(--border-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }

  /* Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--background);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--border-hover);
  }

  .horizontal-scroll {
    display: flex;
    gap: var(--space-3);
    overflow-x: auto;
    padding-bottom: var(--space-2);
    scrollbar-width: thin;
  }

  .horizontal-scroll::-webkit-scrollbar {
    height: 4px;
  }

  .horizontal-scroll::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 2px;
  }

  /* Mobile overlay dim */
  .sidebar-overlay-dim {
    background: rgba(0, 0, 0, 0.3);
  }

  /* Skeleton shimmer */
  .skeleton-shimmer {
    background: linear-gradient(90deg, var(--background-secondary) 25%, var(--border) 50%, var(--background-secondary) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}

@layer utilities {
  .fade-in,
  .animate-fade-in {
    animation: fadeIn 300ms ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-scale-in {
    animation: scaleIn 200ms ease-out;
  }

  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  .animate-slide-in-left {
    animation: slideInLeft 200ms ease-out;
  }

  @keyframes slideInLeft {
    from { transform: translateX(-100%); }
    to { transform: translateX(0); }
  }

  .stagger-children > * {
    opacity: 0;
    animation: fadeIn 300ms ease-out forwards;
  }

  .stagger-children > *:nth-child(1) { animation-delay: 0ms; }
  .stagger-children > *:nth-child(2) { animation-delay: 50ms; }
  .stagger-children > *:nth-child(3) { animation-delay: 100ms; }
  .stagger-children > *:nth-child(4) { animation-delay: 150ms; }
  .stagger-children > *:nth-child(5) { animation-delay: 200ms; }
  .stagger-children > *:nth-child(6) { animation-delay: 250ms; }
}
