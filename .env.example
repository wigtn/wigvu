# QuickPreview Environment Variables (for docker-compose)
# docker-compose에서 사용하는 환경 변수 설정 파일

# ===========================================
# Required: API Keys (필수 API 키)
# ===========================================
# YouTube Data API v3 키 (영상 메타데이터 조회용)
# 발급: https://console.cloud.google.com/apis/credentials
YOUTUBE_API_KEY=your-youtube-api-key

# OpenAI API 키 (AI 분석 및 번역용)
# 발급: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# 사용할 OpenAI 모델 (gpt-4o-mini 권장, 비용 효율적)
OPENAI_MODEL=gpt-4o-mini

# 내부 API 키 (NestJS API 서버 <-> AI 서버 간 인증)
# 생성 명령어: openssl rand -hex 16
INTERNAL_API_KEY=your-32-char-random-string-here

# ===========================================
# STT Configuration (음성 인식 설정)
# ===========================================
# WhisperX STT 서버 URL (음성을 텍스트로 변환)
STT_API_URL=your-STT-server-URL

# STT 사용 가능한 최대 영상 길이 (분)
# 이 시간을 초과하면 STT를 건너뛰고 YouTube 자막만 사용
# 긴 영상은 STT 처리 시간이 오래 걸리므로 제한 권장
STT_MAX_DURATION_MINUTES=25

# ===========================================
# Video Duration Limits (영상 길이 제한)
# ===========================================
# 분석 가능한 최대 영상 길이 (분)
# 이 시간을 초과하면 분석 자체를 거부하고 에러 반환
# MVP 단계에서는 25-30분 권장
MAX_VIDEO_DURATION_MINUTES=25

# ===========================================
# AI Service Configuration (AI 서비스 설정)
# ===========================================
# 업로드 가능한 최대 파일 크기 (MB)
MAX_FILE_SIZE_MB=500

# Rate Limiting (요청 제한)
# 분당 AI 분석 요청 허용 횟수
RATE_LIMIT_ANALYZE=30

# 분당 STT 요청 허용 횟수
RATE_LIMIT_STT=10

# 동시 처리 가능한 최대 요청 수
MAX_CONCURRENT_REQUESTS=10

# Retry Settings (재시도 설정)
# 실패 시 최대 재시도 횟수
RETRY_MAX_ATTEMPTS=3

# 재시도 간 기본 대기 시간 (초)
RETRY_BASE_DELAY=1.0

# Timeouts (타임아웃 설정, 초 단위)
# AI 분석 요청 타임아웃
TIMEOUT_ANALYZE=30

# STT 요청 타임아웃 (긴 영상 처리를 위해 길게 설정)
TIMEOUT_STT=300

# 헬스체크 타임아웃
TIMEOUT_HEALTH=5

# Validation Limits (검증 제한)
# 영상 제목 최대 길이 (자)
MAX_TITLE_LENGTH=200

# 채널명 최대 길이 (자)
MAX_CHANNEL_LENGTH=100

# 영상 설명 최대 길이 (자)
MAX_DESCRIPTION_LENGTH=2000

# 자막 텍스트 최대 길이 (자)
MAX_TRANSCRIPT_LENGTH=10000

# 자막 세그먼트 최대 개수
MAX_SEGMENTS_COUNT=1000

# ===========================================
# API Service Configuration (API 서버 설정)
# ===========================================
# Rate Limiting (요청 제한)
# 제한 윈도우 시간 (밀리초, 60000 = 1분)
RATE_LIMIT_WINDOW_MS=60000

# 윈도우 시간 내 최대 요청 수
RATE_LIMIT_MAX=60

# ===========================================
# Logging (로깅 설정)
# ===========================================
# 로그 레벨 (DEBUG, INFO, WARN, ERROR)
# 개발: DEBUG, 운영: INFO 권장
LOG_LEVEL=INFO
